import{a as J,b as K}from"./chunk-ZYZ7D5RS.js";import"./chunk-U5YLW2ZZ.js";import"./chunk-X3M3N6ZJ.js";import"./chunk-RFCIZRZT.js";import{a as H}from"./chunk-YAVCKOY5.js";import{a as z}from"./chunk-7BH45QR6.js";import{c as O,e as V,f as k,j as P,k as j,l as G,m as $,n as B,o as L,q,r as R}from"./chunk-6SI6O3BZ.js";import"./chunk-5LHHFRH4.js";import{j as I}from"./chunk-FTR46PKS.js";import{$b as T,Cb as b,Fa as x,Fb as E,Gb as M,Hb as r,Ib as s,Jb as y,Kb as A,Ob as m,Pb as l,Za as i,Zb as p,_b as N,cb as h,fc as w,gc as D,ib as f,ka as _,nb as v,r as C,ua as F,va as u,wa as g,yb as n}from"./chunk-LZBM4COA.js";var X=(o,e)=>e.value;function Y(o,e){if(o&1&&(r(0,"option",4),p(1),s()),o&2){let t=e.$implicit;n("value",t.value),i(),N(t.label)}}function Z(o,e){if(o&1&&(r(0,"div",6),y(1,"app-form-field",8)(2,"app-form-field",9),r(3,"div",10),y(4,"app-form-field",11)(5,"app-form-field",12)(6,"app-form-field",13)(7,"app-form-field",14)(8,"app-form-field",15),s()()),o&2){let t=l();i(),n("errorMessage",t.getFieldError("name")),i(),n("errorMessage",t.getFieldError("address")),i(2),n("errorMessage",t.getFieldError("city")),i(),n("errorMessage",t.getFieldError("state")),i(),n("errorMessage",t.getFieldError("postalCode")),i(),n("errorMessage",t.getFieldError("country")),i(),n("errorMessage",t.getFieldError("phone"))}}var S=class o{constructor(e){this.fb=e;this.addressForm=this.createForm()}address=null;isEditMode=!1;addressSaved=new x;addressTypes=[{value:"home",label:"Casa"},{value:"work",label:"Trabajo"},{value:"other",label:"Otro"}];addressForm;formErrorService=_(H);ngOnChanges(e){e.address&&(this.address?(this.populateForm(),this.addressForm.get("addressType")?.disable()):(this.addressForm.reset(),this.addressForm.patchValue({addressType:""}),this.addressForm.get("addressType")?.enable()))}createForm(){return this.fb.group({addressType:["",[O.required]],name:[""],address:[""],city:[""],state:[""],postalCode:[""],country:[""],phone:[""]})}populateForm(){this.address&&this.addressForm.patchValue({addressType:this.address.addressType||"",name:this.address.name||"",address:this.address.address||"",city:this.address.city||"",state:this.address.state||"",postalCode:this.address.postalCode||"",country:this.address.country||"",phone:this.address.phone||""})}getFieldError(e){let t={addressType:"Tipo de direccion",name:"Nombre de la direccion",address:"Direcion de envio",city:"Ciudad",state:"estado",postalCode:"Codigo Postal",country:"Pais",phone:"Numero de telefono"};return this.formErrorService.getFieldError(this.addressForm,e,t)}onSubmit(){if(this.addressForm.invalid)return;let e=this.addressForm.value;console.log(e);let t={_id:this.address?._id??"",user:this.address?.user??"",name:e.name||"",address:e.address||"",city:e.city||"",state:e.state||"",postalCode:e.postalCode||"",country:e.country||"",phone:e.phone||"",addressType:e.addressType||"",isDefault:this.address?.isDefault??!1};this.addressForm.reset(),this.addressSaved.emit(t)}static \u0275fac=function(t){return new(t||o)(h(q))};static \u0275cmp=f({type:o,selectors:[["app-shipping-methods-form"]],inputs:{address:"address",isEditMode:"isEditMode"},outputs:{addressSaved:"addressSaved"},features:[F],decls:13,vars:3,consts:[[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-3"],["formControlName","addressType",1,"w-full","p-2.5","bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","disabled:bg-gray-100","disabled:cursor-not-allowed"],["value","","disabled",""],[3,"value"],[1,"space-y-4","text-gray-700"],[1,"space-y-4","animate-fade-in"],["type","submit",1,"w-full","flex","justify-center","py-2.5","px-4","border","border-transparent","rounded-lg","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","duration-200",3,"disabled"],["label","Nombre","fieldId","name","type","text","placeholder","Nombre","formControlName","name",3,"errorMessage"],["label","Direcci\xF3n","fieldId","address","type","text","placeholder","Direcci\xF3n","formControlName","address",3,"errorMessage"],[1,"grid","grid-cols-2","gap-4"],["label","Ciudad","fieldId","city","type","text","placeholder","Ciudad","formControlName","city",3,"errorMessage"],["label","Estado","fieldId","state","type","text","placeholder","Estado","formControlName","state",3,"errorMessage"],["label","C\xF3digo Postal","fieldId","postalCode","type","text","placeholder","C\xF3digo Postal","formControlName","postalCode",3,"errorMessage"],["label","Pa\xEDs","fieldId","country","type","text","placeholder","Pa\xEDs","formControlName","country",3,"errorMessage"],["label","Tel\xE9fono","fieldId","phone","type","text","placeholder","Tel\xE9fono","formControlName","phone",3,"errorMessage"]],template:function(t,a){if(t&1&&(r(0,"form",0),m("ngSubmit",function(){return a.onSubmit()}),r(1,"div")(2,"label",1),p(3,"Selecciona tu tipo de Direcci\xF3n"),s(),r(4,"select",2)(5,"option",3),p(6,"Seleccione un tipo"),s(),E(7,Y,2,2,"option",4,X),s()(),r(9,"div",5),v(10,Z,9,7,"div",6),s(),r(11,"button",7),p(12," Enviar "),s()()),t&2){let d;n("formGroup",a.addressForm),i(7),M(a.addressTypes),i(3),b(((d=a.addressForm.get("addressType"))==null?null:d.value)==="home"||((d=a.addressForm.get("addressType"))==null?null:d.value)==="work"?10:-1),i(),n("disabled",a.addressForm.invalid)}},dependencies:[R,P,B,L,$,V,k,j,G,z],encapsulation:2})};function ee(o,e){if(o&1){let t=A();r(0,"div",5)(1,"div",6)(2,"app-shipping-methods-list",7),m("edit",function(d){u(t);let c=l();return g(c.onEdit(d))})("delete",function(d){u(t);let c=l();return g(c.onDelete(d))}),s()(),r(3,"div",8)(4,"div",9)(5,"h2",10),p(6),s(),r(7,"app-shipping-methods-form",11),m("addressSaved",function(d){u(t);let c=l();return g(c.onAddressSaved(d))}),s()()()()}if(o&2){let t=l();i(2),n("shippingMethods",e)("isEditable",!0),i(4),T(" ",t.isEditing?"Editar Direccion":"Nueva Direccion"," "),i(),n("address",t.selectAddressMethod)("isEditMode",t.isEditing)}}var Q=class o{constructor(e){this.shippingService=e}addressMethods$=C([]);selectAddressMethod=null;isEditing=!1;ngOnInit(){this.addressMethods$=this.shippingService.shippingAddresses$}onEdit(e){this.selectAddressMethod=e,this.isEditing=!0}onDelete(e){confirm("Est\xE1s seguro de eliminar esta Direccion de envio?")&&this.shippingService.deleteShippingAddress(e).subscribe()}onAddNew(){this.selectAddressMethod=null,this.isEditing=!1}onAddressSaved(e){this.isEditing?this.shippingService.editShippingAddress(e).subscribe(()=>{this.onAddNew()}):this.shippingService.addShippingAddress(e).subscribe(()=>{this.onAddNew})}static \u0275fac=function(t){return new(t||o)(h(K))};static \u0275cmp=f({type:o,selectors:[["app-shipping-address"]],decls:10,vars:3,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"bg-green-500","hover:bg-green-600","text-white","font-medium","py-2","px-4","rounded","transition-colors","duration-200","flex","items-center","gap-2",3,"click"],[1,"text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2"],[3,"edit","delete","shippingMethods","isEditable"],[1,"lg:col-span-1"],[1,"bg-white","rounded-lg","shadow-md","p-6","sticky","top-4"],[1,"text-xl","font-semibold","mb-4","text-gray-800"],[3,"addressSaved","address","isEditMode"]],template:function(t,a){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),p(3,"Dirrecci\xF3n de Envio"),s(),r(4,"button",3),m("click",function(){return a.onAddNew()}),r(5,"span",4),p(6,"+"),s(),p(7," Agregar Nuevo "),s()(),v(8,ee,8,5,"div",5),w(9,"async"),s()),t&2){let d;i(8),b((d=D(9,1,a.addressMethods$))?8:-1,d)}},dependencies:[J,S,I],encapsulation:2})};export{Q as ShippingAddressComponent};
