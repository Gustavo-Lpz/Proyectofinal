import{a as D}from"./chunk-DZQGWMRM.js";import"./chunk-ELXQ6ALC.js";import{e as F}from"./chunk-PZXQOTNQ.js";import"./chunk-U5YLW2ZZ.js";import"./chunk-RFCIZRZT.js";import"./chunk-5LHHFRH4.js";import{g as M,h as O,j as L,l as j,n as B}from"./chunk-FTR46PKS.js";import{$b as u,Cb as k,Hb as e,I as w,Ib as n,Jb as s,Kb as E,Ob as f,Pb as m,Xa as I,Za as a,Zb as o,_b as $,cb as T,fc as x,gc as S,hc as h,ib as V,nb as p,r as y,va as v,wa as C,xa as _,ya as g,yb as d}from"./chunk-LZBM4COA.js";function Q(r,i){r&1&&(e(0,"div",1),_(),e(1,"svg",3),s(2,"path",4),n(),g(),e(3,"h2",5),o(4,"Tu carrito est\xE1 vac\xEDo"),n(),e(5,"p",6),o(6,"Agrega productos para comenzar tu compra"),n(),e(7,"a",7),o(8," Ir a productos "),n()())}function q(r,i){if(r&1&&(e(0,"span"),o(1),n()),r&2){let t=i.ngIf;a(),u("",t," productos")}}function A(r,i){r&1&&(e(0,"span",42),o(1," Agotado "),n())}function G(r,i){r&1&&(e(0,"span",43),o(1," Pocas unidades "),n())}function P(r,i){if(r&1){let t=E();e(0,"div",21)(1,"div",22),s(2,"img",23),e(3,"div",24)(4,"h3",25),o(5),n(),e(6,"p",26),o(7),n(),e(8,"div",27),p(9,A,2,0,"span",28)(10,G,2,0,"span",29),n()(),e(11,"div",30)(12,"button",31),f("click",function(){let c=v(t).$implicit,b=m(3);return C(b.decreaseQuantity(c.product._id||"",c.quantity))}),_(),e(13,"svg",32),s(14,"path",33),n()(),g(),e(15,"span",34),o(16),n(),e(17,"button",31),f("click",function(){let c=v(t).$implicit,b=m(3);return C(b.increaseQuantity(c.product._id||"",c.quantity,c.product.stock||0))}),_(),e(18,"svg",32),s(19,"path",35),n()()(),g(),e(20,"div",36)(21,"p",37),o(22),x(23,"number"),n(),e(24,"p",38),o(25),x(26,"number"),n()(),e(27,"button",39),f("click",function(){let c=v(t).$implicit,b=m(3);return C(b.removeFromCart(c.product._id||""))}),_(),e(28,"svg",40),s(29,"path",41),n()()()()}if(r&2){let t=i.$implicit,l=m(3);a(2),d("src",t.product.imageUrl||"https://via.placeholder.com/100",I)("alt",t.product.name),a(3),u(" ",t.product.name," "),a(2),u(" ",t.product.description," "),a(2),d("ngIf",l.isOutOfStock(t.product.stock||0)),a(),d("ngIf",l.isLowStock(t.product.stock||0)),a(2),d("disabled",!l.canDecrease(t.quantity)),a(4),$(t.quantity),a(),d("disabled",!l.canIncrease(t.quantity,t.product.stock||0)),a(5),u(" $",h(23,11,(t.product.price||0)*t.quantity,"1.2-2")," "),a(3),u(" $",h(26,14,t.product.price||0,"1.2-2")," c/u ")}}function z(r,i){if(r&1){let t=E();e(0,"div",2)(1,"div",8)(2,"div")(3,"h1",9),o(4,"Mi Carrito"),n(),e(5,"p",10),p(6,q,2,1,"span",11),x(7,"async"),n()(),e(8,"button",12),f("click",function(){v(t);let c=m(2);return C(c.cleanCart())}),o(9," Vaciar carrito "),n()(),e(10,"div",13),p(11,P,30,17,"div",14),n(),e(12,"div",15)(13,"div",16)(14,"span",17),o(15,"Subtotal:"),n(),e(16,"span",18),o(17),x(18,"async"),x(19,"number"),n()(),e(20,"button",19),o(21," Proceder al pago "),n(),e(22,"button",20),o(23," Continuar comprando "),n()()()}if(r&2){let t=m(),l=m();a(6),d("ngIf",S(7,3,l.cartItemCount$)),a(5),d("ngForOf",t.products),a(6),u(" $",h(19,7,S(18,5,l.cartTotal$),"1.2-2")," ")}}function N(r,i){if(r&1&&p(0,Q,9,0,"div",1)(1,z,24,10,"div",2),r&2){let t=i;k(!t||t.products.length===0?0:1)}}function U(r,i){r&1&&(e(0,"div",1),_(),e(1,"svg",3),s(2,"path",4),n(),g(),e(3,"h2",5),o(4,"Tu carrito est\xE1 vac\xEDo"),n(),e(5,"p",6),o(6,"Agrega productos para comenzar tu compra"),n(),e(7,"a",7),o(8," Ir a productos "),n()())}var H=class r{constructor(i){this.cartService=i}cart$=y(null);cartTotal$=y(0);cartItemCount$=y(0);ngOnInit(){this.cart$=this.cartService.cart$,this.cartTotal$=this.cartService.getCartTotal(),this.cartItemCount$=this.cartService.getItemCount()}removeFromCart(i){this.cartService.removeFromCart(i).subscribe()}increaseQuantity(i,t,l){t>=l||this.updateQuatity(i,1)}decreaseQuantity(i,t){if(t<=1){this.removeFromCart(i);return}this.updateQuatity(i,-1)}updateQuatity(i,t){this.cartService.addToCart(i,t).pipe(w(1)).subscribe()}canIncrease(i,t){return i<t}canDecrease(i){return i>0}isOutOfStock(i){return i===0}isLowStock(i){return i<=5&&i>0}cleanCart(){this.cartService.clearCart().pipe(w(1)).subscribe()}static \u0275fac=function(t){return new(t||r)(T(D))};static \u0275cmp=V({type:r,selectors:[["app-cart"]],decls:4,vars:3,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-center","py-12"],[1,"max-w-6xl","mx-auto"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-24","h-24","mx-auto","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"text-2xl","font-bold","text-gray-800","mt-4"],[1,"text-gray-600","mt-2"],["routerLink","/products",1,"inline-block","mt-6","px-6","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[4,"ngIf"],[1,"px-4","py-2","border","border-red-300","text-red-600","rounded-lg","hover:bg-red-50","transition-colors",3,"click"],[1,"bg-white","rounded-lg","shadow-sm","overflow-hidden","mb-6"],["class","border-b border-gray-200 last:border-b-0",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","text-gray-700"],[1,"text-2xl","font-bold","text-gray-900"],["routerLink","/checkout",1,"w-full","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","font-semibold"],["routerLink","/products",1,"w-full","mt-3","py-3","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors"],[1,"border-b","border-gray-200","last:border-b-0"],[1,"p-6","flex","items-center","gap-6"],[1,"w-24","h-24","object-cover","rounded-lg",3,"src","alt"],[1,"flex-1"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"mt-2"],["class","text-xs px-2 py-1 bg-red-100 text-red-800 rounded-full",4,"ngIf"],["class","text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",4,"ngIf"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","rounded-full","border","border-gray-300","flex","items-center","justify-center","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H4"],[1,"w-12","text-center","font-semibold"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"text-right"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"text-red-600","hover:text-red-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-xs","px-2","py-1","bg-red-100","text-red-800","rounded-full"],[1,"text-xs","px-2","py-1","bg-yellow-100","text-yellow-800","rounded-full"]],template:function(t,l){if(t&1&&(e(0,"div",0),p(1,N,2,1),x(2,"async"),p(3,U,9,0,"div",1),n()),t&2){let c;a(),k((c=S(2,1,l.cart$))?1:3,c)}},dependencies:[B,M,O,L,j,F],encapsulation:2})};export{H as CartComponent};
