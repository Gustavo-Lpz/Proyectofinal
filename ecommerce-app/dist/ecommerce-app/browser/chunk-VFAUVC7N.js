import{a as y}from"./chunk-TXXZHHRC.js";import{a as k}from"./chunk-DZQGWMRM.js";import"./chunk-ELXQ6ALC.js";import"./chunk-U5YLW2ZZ.js";import"./chunk-X3M3N6ZJ.js";import"./chunk-RFCIZRZT.js";import"./chunk-5LHHFRH4.js";import{$b as W,Cb as u,Fb as C,Gb as L,Hb as r,I as f,Ib as o,Jb as S,Kb as x,Ob as h,Pb as d,Xa as v,Za as a,Zb as s,_b as E,cc as T,ib as w,ka as _,nb as g,va as m,wa as p,yb as b}from"./chunk-LZBM4COA.js";var I=()=>[],V=(n,e)=>e==null||e.product==null?null:e.product._id;function F(n,e){n&1&&(r(0,"p",1),s(1,"Cargando wishlist..."),o())}function j(n,e){n&1&&(r(0,"p",1),s(1,"Tu lista de deseos est\xE1 vac\xEDa."),o())}function M(n,e){if(n&1){let t=x();r(0,"div",6),S(1,"img",7),r(2,"h3",8),s(3),o(),r(4,"p",9),s(5),o(),r(6,"button",10),h("click",function(){let l=m(t).$implicit,c=d(2);return p(c.removeItem(l.product._id))}),s(7," Eliminar "),o(),r(8,"button",11),h("click",function(){let l=m(t).$implicit,c=d(2);return p(c.moveToCart(l.product._id))}),s(9," Mover al carrito \u{1F6D2} "),o()()}if(n&2){let t=e.$implicit;a(),b("src",t.product.image,v)("alt",t.product.name),a(2),E(t.product.name),a(2),W("$ ",t.product.price,"")}}function O(n,e){if(n&1){let t=x();r(0,"div",3)(1,"button",4),h("click",function(){m(t);let l=d();return p(l.clearList())}),s(2," Eliminar toda la lista "),o()(),r(3,"div",5),C(4,M,10,4,"div",6,V),o()}if(n&2){let t,i=d();a(4),L((t=i.wishlist==null?null:i.wishlist.products)!==null&&t!==void 0?t:T(0,I))}}var D=class n{wishService=_(y);cartService=_(k);wishlist;loading=!0;ngOnInit(){this.loadWishList()}loadWishList(){this.loading=!0,this.wishService.getWishList().subscribe({next:e=>{this.wishlist=e,this.loading=!1},error:e=>{console.error("Error loading wishlist:",e),this.loading=!1}})}removeItem(e){this.wishService.removeProduct(e).subscribe({next:t=>{this.wishlist=t},error:t=>console.error(t)})}clearList(){this.wishService.clearWishList().subscribe({next:e=>{this.wishlist=e},error:e=>console.error(e)})}moveToCart(e){this.cartService.addToCart(e).pipe(f(1)).subscribe({next:()=>{this.removeItem(e),console.log("Producto movido al carrito")},error:t=>console.error("Error moviendo al carrito:",t)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=w({type:n,selectors:[["app-wish-list"]],decls:6,vars:3,consts:[[1,"w-full","min-h-screen","p-8"],[1,"text-center","text-gray-400"],[1,"text-center","text-5xl","font-extrabold","mb-12","bg-gradient-to-r","from-red-600","to-black","bg-clip-text","text-transparent"],[1,"flex","justify-end","mb-6"],[1,"bg-red-700","hover:bg-red-800","text-white","px-5","py-2","rounded-lg","shadow-md","transition",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-zinc-900","text-white","p-4","rounded-lg","shadow-lg"],[1,"w-full","h-48","object-cover","rounded-md","mb-4",3,"src","alt"],[1,"text-xl","font-bold"],[1,"text-gray-300","mt-2"],[1,"mt-4","bg-red-600","hover:bg-red-700","px-4","py-2","rounded",3,"click"],[1,"mt-2","bg-green-600","hover:bg-green-700","px-4","py-2","rounded",3,"click"]],template:function(t,i){if(t&1&&(r(0,"section",0),g(1,F,2,0,"p",1),r(2,"h1",2),s(3," Tu Lista de Deseos "),o(),g(4,j,2,0,"p",1)(5,O,6,1),o()),t&2){let l,c;a(),u(i.loading?1:-1),a(3),u(!i.loading&&((l=i.wishlist==null||i.wishlist.products==null?null:i.wishlist.products.length)!==null&&l!==void 0?l:0)===0?4:-1),a(),u(((c=i.wishlist==null||i.wishlist.products==null?null:i.wishlist.products.length)!==null&&c!==void 0?c:0)>0?5:-1)}},encapsulation:2})};export{D as WishListComponent};
