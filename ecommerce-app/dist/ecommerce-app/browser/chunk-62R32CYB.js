import{a as A}from"./chunk-TXXZHHRC.js";import{a as V}from"./chunk-DZQGWMRM.js";import"./chunk-ELXQ6ALC.js";import{a as j}from"./chunk-7LR4MIEU.js";import{b as L}from"./chunk-PZXQOTNQ.js";import"./chunk-U5YLW2ZZ.js";import"./chunk-X3M3N6ZJ.js";import{e as T}from"./chunk-RFCIZRZT.js";import{f as M}from"./chunk-5LHHFRH4.js";import{m as D}from"./chunk-FTR46PKS.js";import{$b as d,Ab as g,Cb as v,Hb as t,I as f,Ib as i,Jb as s,Kb as I,Ob as _,Pb as p,Xa as C,Za as o,Zb as n,cb as c,e as w,fc as P,gc as E,ib as k,nb as x,va as b,wa as h,xa as u,ya as y,yb as S}from"./chunk-LZBM4COA.js";function W(r,a){if(r&1&&s(0,"img",6),r&2){let e=p(2);S("src",e.product.imageUrl,C)("alt",e.product.name)}}function B(r,a){r&1&&(t(0,"div",7)(1,"div",30),u(),t(2,"svg",31),s(3,"path",32),i(),y(),t(4,"p",33),n(5,"Sin imagen disponible"),i()()())}function H(r,a){if(r&1&&(t(0,"span",11),n(1),i()),r&2){let e=p(2);o(),d(" \xA1\xDAltimas ",e.product.stock," unidades! ")}}function z(r,a){if(r&1){let e=I();t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),x(6,W,1,2,"img",6)(7,B,6,0,"div",7),i()(),t(8,"div",8)(9,"div",9)(10,"span",10),n(11),i(),x(12,H,2,1,"span",11),i(),t(13,"h1",12),n(14),i(),t(15,"p",13),n(16),i(),t(17,"div",14)(18,"div",15)(19,"div")(20,"span",16),n(21),P(22,"currency"),i(),t(23,"p",17),n(24,"Precio con IVA incluido"),i()(),t(25,"div",18)(26,"p",19),n(27,"Stock disponible"),i(),t(28,"div",20),s(29,"div",21),t(30,"p",22),n(31),i()()()()(),t(32,"div",23)(33,"button",24),_("click",function(){b(e);let m=p();return h(m.addToCart())}),t(34,"span",25),u(),t(35,"svg",26),s(36,"path",27),i(),n(37),i()(),y(),t(38,"button",28),_("click",function(){b(e);let m=p();return h(m.addToWishList())}),u(),t(39,"svg",26),s(40,"path",29),i(),n(41,` A\xF1adir a lista de deseos
`),i()()()()()()()}if(r&2){let e=p();o(6),v(e.product.imageUrl?6:7),o(5),d(" ",e.product.category.name," "),o(),v(e.product.stock>0&&e.product.stock<=5?12:-1),o(2),d(" ",e.product.name," "),o(2),d(" ",e.product.description," "),o(5),d(" ",E(22,15,e.product.price)," "),o(8),g(e.product.stock<=5?"bg-orange-400":"bg-green-500"),o(),g(e.product.stock<=5?"text-orange-600":"text-green-600"),o(),d(" ",e.product.stock," unidades "),o(2),g(e.product.stock===0?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-2xl transform hover:scale-[1.03] active:scale-[0.98]"),S("disabled",e.product.stock===0),o(4),d(" ",e.product.stock===0?"Producto agotado":"Agregar al carrito"," ")}}var U=class r{constructor(a,e,l,m,G){this.productService=a;this.route=e;this.cartService=l;this.wishListService=m;this.store=G}product=null;ngOnInit(){this.route.paramMap.subscribe({next:a=>{let e=a.get("id");e&&this.productService.getProductByID(e).subscribe({next:l=>{this.product=l},error:()=>{this.product=null}})}})}addToCart(){this.product&&this.cartService.addToCart(this.product._id,1).subscribe()}getUserId(){return new Promise(a=>{this.store.select(T).pipe(f(1)).subscribe(e=>{a(e??"")})})}addToWishList(){return w(this,null,function*(){if(!this.product)return;if(!(yield this.getUserId())){console.error("No hay usuario logueado");return}this.wishListService.addProduct(this.product._id).pipe(f(1)).subscribe({next:()=>{console.log("Producto agregado a wishlist")},error:e=>{console.error("Error agregando a wishlist",e)}})})}static \u0275fac=function(e){return new(e||r)(c(j),c(L),c(V),c(A),c(M))};static \u0275cmp=k({type:r,selectors:[["app-product-detail"]],decls:1,vars:1,consts:[[1,"min-h-screen","bg-gradient-to-br","from-gray-50","via-white","to-blue-50/30","py-6","sm:py-10"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-white/90","backdrop-blur-xl","rounded-2xl","shadow-xl","border","border-gray-200/60","overflow-hidden","transition-all","duration-300"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","sm:gap-8","p-6","sm:p-10"],[1,"space-y-4"],[1,"aspect-square","bg-gradient-to-br","from-gray-100","to-gray-200","rounded-2xl","overflow-hidden","shadow-lg","group"],[1,"w-full","h-full","object-cover","transition-transform","duration-700","group-hover:scale-110",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"space-y-6"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1.5","rounded-full","text-sm","font-medium","bg-blue-100","text-blue-800","border","border-blue-200"],[1,"px-3","py-1.5","rounded-full","text-sm","font-medium","bg-orange-100","text-orange-700","border","border-orange-200"],[1,"text-3xl","sm:text-4xl","font-extrabold","text-gray-900"],[1,"text-gray-600","text-base","sm:text-lg","leading-relaxed"],[1,"border-t","border-gray-200","pt-6"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","sm:text-4xl","font-black","bg-gradient-to-r","from-green-600","to-green-700","bg-clip-text","text-transparent"],[1,"text-sm","text-gray-500","mt-1"],[1,"text-left","sm:text-right"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-2","mt-1"],[1,"w-2.5","h-2.5","rounded-full","animate-pulse"],[1,"text-lg","font-semibold"],[1,"space-y-4","pt-4"],[1,"w-full","py-4","rounded-xl","font-semibold","text-base","transition-all","duration-300",3,"click","disabled"],[1,"flex","items-center","justify-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13v6a1 1 0 001 1h9a1 1 0 001-1v-6m-9 0V9a1 1 0 011-1h7a1 1 0 011 1v4"],[1,"w-full","flex","items-center","justify-center","gap-2","py-3.5","px-6","bg-white","hover:bg-gray-100","rounded-xl","border","border-gray-300","font-semibold","text-gray-700","transition-all","duration-300",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"],[1,"text-center","opacity-70"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-20","h-20","mx-auto","mb-3","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-gray-500"]],template:function(e,l){e&1&&x(0,z,42,17,"div",0),e&2&&v(l.product?0:-1)},dependencies:[D],encapsulation:2})};export{U as ProductDetailComponent};
