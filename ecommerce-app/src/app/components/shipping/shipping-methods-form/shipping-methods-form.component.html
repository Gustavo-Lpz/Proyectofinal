<form [formGroup]="addressForm" (ngSubmit)="onSubmit()" class="space-y-6">
  <div>
    <label class="block text-sm font-medium text-gray-700 mb-3"
      >Selecciona tu tipo de Dirección</label>
    <select
      formControlName="addressType"
      class="w-full p-2.5 bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block disabled:bg-gray-100 disabled:cursor-not-allowed">
      <option value="" disabled>Seleccione un tipo</option>
      @for (type of addressTypes; track type.value) {
      <option [value]="type.value">{{ type.label }}</option>
      }
    </select>

  </div>

  <div class="space-y-4 text-gray-700">
    @if (addressForm.get('addressType')?.value === 'home' ||
    addressForm.get('addressType')?.value === 'work') {
    <div class="space-y-4 animate-fade-in">

      <app-form-field
        label="Nombre"
        fieldId="name"
        type="text"
        placeholder="Nombre"
        [errorMessage]="getFieldError('name')"
        formControlName="name">
      </app-form-field>

      <app-form-field
        label="Dirección"
        fieldId="address"
        type="text"
        placeholder="Dirección"
        [errorMessage]="getFieldError('address')"
        formControlName="address">
      </app-form-field>

      <div class="grid grid-cols-2 gap-4">
        <app-form-field
          label="Ciudad"
          fieldId="city"
          type="text"
          placeholder="Ciudad"
          [errorMessage]="getFieldError('city')"
          formControlName="city"
        >
        </app-form-field>

        <app-form-field
          label="Estado"
          fieldId="state"
          type="text"
          placeholder="Estado"
          [errorMessage]="getFieldError('state')"
          formControlName="state"
        >
        </app-form-field>

        <app-form-field
          label="Código Postal"
          fieldId="postalCode"
          type="text"
          placeholder="Código Postal"
          [errorMessage]="getFieldError('postalCode')"
          formControlName="postalCode"
        >
        </app-form-field>

        <app-form-field
          label="País"
          fieldId="country"
          type="text"
          placeholder="País"
          [errorMessage]="getFieldError('country')"
          formControlName="country"
        >
        </app-form-field>

        <app-form-field
          label="Teléfono"
          fieldId="phone"
          type="text"
          placeholder="Teléfono"
          [errorMessage]="getFieldError('phone')"
          formControlName="phone" >
        </app-form-field>
      </div>
    </div>
    }
  </div>

  <button
    type="submit"
    [disabled]="addressForm.invalid"
    class="w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"
  >
    Enviar
  </button>
</form>
